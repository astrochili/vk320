+++
date = "2016-04-06T23:53:00+03:00"
draft = true
title = "Структура классов"
vk = "wall-74416592_234"
+++

Я реализовал небольшую структуру в виде двух синглтон-менеджеров, трех классов модели, одного главного вью-контроллера и отдельных контроллеров, отвечающих за различные блоки UI.

![Скриншот Xcode](/images/first-structure.jpg)

VKManager - черный ящик что на входе принимает запросы, а на выходе выдает массивы данных из ВК. Внутри себя разбирается с авторизацией, кешированием и сериализацией JSON. Единственная зависимость с внешним миром - это обращение в WebView, т.е. открытие/закрытие браузера внутри программы для авторизации на сайте ВК и одобрения прав приложению.

DownloadsManager - собственно тот, кто будет отвечать за текущий список загрузок, их очередь, состояние, разрешение ошибок, сохранение или кеширование файлов и т.п.

Owner, Track, Playlist - база данных, построенная на Realm (realm.io). Помимо использования в рамках онлайн сессии, будет играть роль локального кэша метаданных из социальной сети для возможности навигации по избранным контактам и аудиозаписям в оффлайн-режиме.

MasterVC - главный ViewController, который будет управлять "сверху" другими блоками интерфейса. Из основных задач - это первоначальная иницилизация всей верстки интерфейса и ее динамическое изменение. Все остальные классы UI (PlayerView, NavigationView, TracksView и т.д.) будут выполнять роль контроллеров в рамках своей зоны ответственности. 

В общем ничего сложного по структуре пока нет. Скорее всего, она даже не разрастется более чем в полтора раза. Предвижу пару менеджеров и дюжину кастомных NSView и NSTableRowView.